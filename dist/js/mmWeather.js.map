{"version":3,"sources":["../../src/js/mmWeather.es2015.js"],"names":["mmHelper","cssContainer","document","querySelector","mmWeather","Weather","data","name","weather","main","description","icon","temp","toFixed","getTime","d","dt_txt","replace","length","day","Date","getDay","getWeatherDay","weathers","currentWeather","init","url","foreCast","forecastUrl","apiUrl","updateInterval","coordParam","lat","lon","idParam","apiId","apiParamString","getWeather","setInterval","jqxhr","$","getJSON","each","list","index","value","city","console","log","push","displayWeather","fail","weatherIconClass","iconCode","weatherType","type","toLowerCase","ul","html","append","i","find","capitalizeFirstLetter"],"mappings":"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","file":"mmWeather.js","sourcesContent":["(function(mmHelper) { \n    var cssContainer = document.querySelector(\".mm-weather\");\n\tvar mmHelper = mmHelper.mmWeather;\n\n    class Weather {\n        constructor(data) {\n            this.name = data.name  !== \"undefined\" ? data.name : \"\";\n            this.weather = data.weather[0].main;\n            this.description = data.weather[0].description;\n            this.icon = data.weather[0].icon;\n            this.temp = (data.main.temp - 273.15).toFixed(2);\n            this.getTime = function () {\n                var d = data.dt_txt !== \"undefined\" ? data.dt_txt.replace(/\\s/g, \"T\") :  \"\";\n                \n                if(d.length > 0) {\n                    day = new Date(d).getDay();\n                        return getWeatherDay(day);\n                } \n                \n                return 0;\n            }\n        }\n    }\n\n\tvar weathers = [];\n\tvar currentWeather = {};\n\n\tmmWeather.init = function() {\n\t\tvar url = mmHelper.foreCast === true ? mmHelper.forecastUrl : mmHelper.apiUrl;\n\t\tvar updateInterval = !mmHelper.updateInterval || mmHelper.updateInterval === \"undefined\" ? 1080000  :  mmHelper.updateInterval; // Every 3 hours per default\n\t\tvar coordParam = \"lat=\" + mmHelper.lat + \"&lon=\" + mmHelper.lon;\n\t\tvar idParam = \"appid=\" + mmHelper.apiId;\n\t\tvar apiParamString = url + \"?\" + coordParam + \"&\" + idParam;\n\n\t\tgetWeather(apiParamString);\n\t\n\t\tsetInterval(function() {\n\t\t\tgetWeather(apiParamString);\n\t\t}, updateInterval); \n\t};\n\n\tfunction getWeather(url) {\n\t\tvar jqxhr = $.getJSON(url, function(data) {\n\t\t\t\n\t\t\t// Store weather forecast in array of Weather objects\n\t\t\tif(mmHelper.foreCast === true) {\t\t\t\t\n\t\t\t\t$.each(data.list, function( index, value ) {\n\t\t\t\t\tif(index % 8 == 0) {\n\t\t\t\t\t\tvalue.name =  data.city.name\n\t\t\t\t\t\tconsole.log(value);\n\t\t\t\t\t\tweathers.push(new Weather(value));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcurrentWeather = new Weather(data);\n\t\t\t}\n\t\t\t\n\t\t\tdisplayWeather();\n\t\t\t\t\t\t\t\n\t\t}).fail(function() {\n\t\t\tconsole.log( \"error\" );\n\t\t});\n\t};\n\t\n\tfunction weatherIconClass(iconCode) {\n\t\tswitch(iconCode) {\n\t\t\tcase \"01d\":\n\t\t\tcase \"01n\":\n\t\t\t\treturn \"mm-weather-icon-sun\";\n\t\t\tcase \"02d\":\n\t\t\tcase \"02n\":\n\t\t\t\treturn \"mm-weather-icon-few-cloud\";\n\t\t\tcase \"03d\":\n\t\t\tcase \"03n\":\n\t\t\t\treturn \"mm-weather-icon-cloud\";\n\t\t\tcase \"04d\":\n\t\t\tcase \"04n\":\n\t\t\t\treturn \"mm-weather-icon-broken-cloud\";\n\t\t\tcase \"09d\":\n\t\t\tcase \"09n\":\n\t\t\t\treturn \"mm-weather-icon-shower-rain\";\n\t\t\tcase \"10d\":\n\t\t\tcase \"10n\":\n\t\t\t\treturn \"mm-weather-icon-rain\";\n\t\t\tcase \"11d\":\n\t\t\tcase \"11n\":\n\t\t\t\treturn \"mm-weather-icon-thunderstorm\";\n\t\t\tcase \"13d\":\n\t\t\tcase \"13n\":\n\t\t\t\treturn \"mm-weather-icon-snow\";\n\t\t\tcase \"50d\":\n\t\t\tcase \"50n\":\n\t\t\t\treturn \"mm-weather-icon-mist\";\n\t\t\tdefault:\n\t\t\t\treturn \"mm-weather-icon-sun\";\n\t\t}\n\t};\n\t\n\tfunction weatherType(type) {\n\t\tvar type = type.toLowerCase();\n\t\tswitch(type) {\n\t\t\tcase \"clear\":\n\t\t\tcase \"clear sky\": return \"klart\";\n\t\t\tcase \"few clouds\": return \"lite molnigt\";\n\t\t\tcase \"scattered clouds\": return \"molnigt\";\n\t\t\tcase \"broken clouds\": return \"mulet\";\n\t\t\tcase \"clouds\": return \"molnigt\";\n\t\t\tcase \"shower rain\": return \"täta regnskurar\";\n\t\t\tcase \"rain\": return \"regn\";\n\t\t\tcase \"thunderstorm\": return \"åskregn\";\n\t\t\tcase \"snow\": return \"snöfall\";\n\t\t\tcase \"mist\": return \"dimma\";\n            case \"clear\": return \"klart\";\n\t\t\tdefault:\n\t\t\t\treturn type;\n\t\t}\n\t};\n\t\n\tfunction getWeatherDay(day) {\n\t\tswitch(day) {\n\t\t\tcase 0: return \"Söndag\";\n\t\t\tcase 1: return \"Måndag\";\n\t\t\tcase 2: return \"Tisdag\";\n\t\t\tcase 3: return \"Onsdag\";\n\t\t\tcase 4: return \"Torsdag\";\n\t\t\tcase 5: return \"Fredag\";\n\t\t\tcase 6: return \"Lördag\";\n\t\t}\n\t}\n\t\n\t// Todo: translate currentWeather.description - http://openweathermap.org/weather-conditions\n\t\n\tfunction displayWeather() {\n\t\tvar ul = \"\";\n\t\t\n\t\tcssContainer.html(\"\");\n\t\t\n\t\tif(mmHelper.foreCast === true) {\n\t\t\t\n\t\t\tcssContainer.append(\"<h1>\" + weathers[0].name + \"</h1>\");\n\t\t\t\t\t\n\t\t\tfor(var i = 0; i<3; i++) {\n\t\t\t\tul = cssContainer.append(\"<ul id=\\\"w\" + i + \"\\\"></ul>\").find(\"ul#w\" + i + \"\");\n\t\t\t\t\tul.append(\"<li>\" + weathers[i].getTime() + \" \" + weathers[i].temp + \" C°</li>\");\n\t\t\t\t\tul.append(\"<li><div class=\\\"\" + weatherIconClass(weathers[i].icon) + \" mm-weather-icon mm-right\\\"></div></li>\");\n\t\t\t\t\tul.append(\"<li class=\\\"mm-weather-type\\\">\" + weatherType(weathers[i].weather).capitalizeFirstLetter() + \"</li>\");\t\n\t\t\t\tcssContainer.append(\"<hr class=\\\"mm-clear\\\" />\");\n\t\t\t}\n\t\t} else {\n\t\t\tul = cssContainer.append(\"<ul></ul>\").find(\"ul\");\n\t\t\t\tul.append(\"<li>\" + currentWeather.name + \" \" + currentWeather.temp + \" C°</li>\");\n\t\t\t\tul.append(\"<li><div class=\\\"\" + weatherIconClass(currentWeather.icon) + \" mm-weather-icon mm-right\\\"></div></li>\");\n\t\t\t\tul.append(\"<li class=\\\"mm-weather-type\\\">\" + weatherType(currentWeather.weather).capitalizeFirstLetter() + \"</li>\");\n\t\t\t\t//\tul.append(\"<li class=\\\"mm-weather-descr\\\">\" + currentWeather.description + \"</li>\");\n\t\t}\n\t};\n\n}(mmHelper));"]}